<?php

/*
 * Implements hook_schema().
 */

function pw_userarchives_schema() {

  $schema['user_archive_cache'] = array(
      'description' => 'TODO: please describe this table!',
      'fields' => array(
          'id' => array(
              'description' => 'TODO: please describe this field!',
              'type' => 'serial',
              'not null' => TRUE,
          ),
          'uid' => array(
              'description' => 'TODO: please describe this field!',
              'type' => 'int',
              'not null' => TRUE,
          ),
          'user_name' => array(
              'description' => 'TODO: please describe this field!',
              'type' => 'varchar',
              'length' => '100',
              'not null' => TRUE,
          ),
          'vid' => array(
              'description' => 'TODO: please describe this field!',
              'type' => 'int',
              'not null' => TRUE,
          ),
          'parliament_name' => array(
              'description' => 'TODO: please describe this field!',
              'type' => 'varchar',
              'length' => '100',
              'not null' => TRUE,
          ),
          'number_of_questions' => array(
              'description' => 'TODO: please describe this field!',
              'type' => 'int',
              'not null' => FALSE,
          ),
          'number_of_answers' => array(
              'description' => 'TODO: please describe this field!',
              'type' => 'int',
              'not null' => FALSE,
          ),
          'number_of_sideline_jobs' => array(
              'description' => 'TODO: please describe this field!',
              'type' => 'int',
              'not null' => FALSE,
          ),
          'number_of_speeches' => array(
              'description' => 'TODO: please describe this field!',
              'type' => 'int',
              'not null' => FALSE,
          ),
          'number_of_missed_votings' => array(
              'description' => 'TODO: please describe this field!',
              'type' => 'int',
              'not null' => FALSE,
          ),
          'timestamp' => array(
              'description' => 'TODO: please describe this field!',
              'type' => 'int',
              'not null' => FALSE,
          ),
          'user_role' => array(
              'description' => 'Role of user: candidate or deputy.',
              'type' => 'varchar',
              'length' => '45',
              'not null' => FALSE,
          ),
          'ratio_question_answer' => array(
              'description' => 'Question/Answer ratio in percent.',
              'type' => 'int',
              'not null' => FALSE,
          ),
      ),
      'primary key' => array('id'),
  );

  return $schema;
}

/**
 * Adds further column user_role
 */
function pw_userarchives_update_7100() {
  db_add_field('user_archive_cache', 'user_role', array('type' => 'varchar', 'length' => '45', 'not null' => FALSE, 'description' => 'Role of user: candidate or deputy.'));
}

/**
 * Adds further column ratio_question_answer
 */
function pw_userarchives_update_7101() {
  db_add_field('user_archive_cache', 'ratio_question_answer', array('type' => 'int', 'not null' => FALSE, 'description' => 'Question/Answer ratio in percent.'));
}
